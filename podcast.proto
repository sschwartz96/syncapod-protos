syntax = "proto3";
package protos;

import "google/protobuf/timestamp.proto";
import "objectID.proto";
import "user.proto";

option go_package = ".;protos";

message Image {
    string title = 1;
    string url = 2;
}

message Category {
    string text = 1;
    repeated Category category = 2;
}

message Podcast {
    ObjectID id = 1; 
    string title = 2;
    string author = 3;
    string type = 4;
    string subtitle = 5;
    string link = 6;
    Image image = 7;
    string explicit = 8;
    string language = 9;
    repeated string Keywords = 10;
    repeated Category category = 11;
    google.protobuf.Timestamp pubDate = 12;
    google.protobuf.Timestamp lastBuildDate = 13;
    string rss = 14;
}

message Episode {
    ObjectID id = 1;
    ObjectID podcastID = 2;
    string title = 3;
    string author = 4;
    string type = 5;
    Image image = 6;
    google.protobuf.Timestamp pubDate = 7;
    string description = 8;
    string summary = 9;
    int32 season = 10;
    int32 episode = 11;
    repeated Category category = 12;
    string explicit = 13;
    string MP3URL = 14;
    int64 durationMillis = 15;
    string subtitle = 16;
}

// (PodcastService)

message Request {
    ObjectID userID = 1;
    ObjectID podcastID = 2;
    ObjectID episodeID = 3;
}

message Response {
    bool success = 1;
    string message = 2;
}

message UserEpiReq {
    ObjectID userID = 1;
    ObjectID episodeID = 2;
    int64 offset = 3;
    bool played = 4;
}

message Episodes {
    repeated Episode episodes = 1;
}

service PodcastService{
    rpc GetEpisodes(Request) returns (Episodes) {}
    rpc GetUserEpisode(Request) returns (UserEpisode) {}
    rpc UpdateUserEpisode(UserEpiReq) returns (Response) {}
    rpc GetSubscriptions(Request) returns (Episodes) {}
    rpc GetUserLastPlayed(Request) returns (Episode) {}
}